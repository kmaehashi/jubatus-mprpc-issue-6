jubatus-msgpack-rpc Issue #6 再現コード
============================================

train だけ 15 秒遅延し、classify は高速に応答するスタブclassifierサーバを立てる
---------------------------------------------------------------------------

```
$ cd heavy_server
$ make
$ ./server &  # localhost:12345 で動作
```

ZK上にスタブclassifier用のノードを作る
---------------------------------------------------------------------------

```
$ ./zkCli.sh
> create /jubatus/actors/classifier/sleeping ""
> create /jubatus/actors/classifier/sleeping/actives ""
> create /jubatus/actors/classifier/sleeping/actives/127.0.0.1_12345 ""
```

classifier プロキシを立ち上げる
---------------------------------------------------------------------------

```
$ jubaclassifier_proxy -c 1 --rpc-port 9199 --interconnect_timeout 3 --pool_size 1 --pool_expire 30 &
```

※セッションプールはスレッドごとに存在するので、確実に問題を再現するために -c 1 を指定。

セッションプールの中のコネクションをタイムアウトさせる
---------------------------------------------------------------------------

```
$ ./client-train.py
```

3秒後にタイムアウトが起きる (セッションプール内のセッションがタイムアウト状態となる)。
次の操作を 60 秒 (pool_expire) 以内に行う。

高速にレスポンスが返ってくるはずの処理を行う
---------------------------------------------------------------------------

```
$ ./client-classify.py
```

パッチ前の版では、3 秒間待たされた後、リクエストが失敗する。
